services:
  audiooook_web:
    build: .
    container_name: audiooook_web
    ports:
      - "3001:4001"
    volumes:
      # 有声书目录：请修改左侧为你的实际路径
      - /path/to/your/audiobooks:/audiobooks

      # 持久化服务端数据（配置、元数据、转码缓存、封面等）
      # 数据目录映射到宿主机，可直接查看和编辑
      - ./data:/app/server/data
    environment:
      - NODE_ENV=production
      - AUDIOBOOK_PATH=/audiobooks
      - PORT=4001
      # 阿里云OSS配置（可选）
      # - OSS_REGION=oss-cn-hangzhou
      # - OSS_ACCESS_KEY_ID=your_access_key_id
      # - OSS_ACCESS_KEY_SECRET=your_access_key_secret
      # - OSS_BUCKET=your_bucket_name
      # - OSS_PREFIX=audiobooks/
    restart: unless-stopped
