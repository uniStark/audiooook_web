services:
  audiooook_web:
    build: .
    container_name: audiooook_web
    ports:
      - "3001:4001"
    volumes:
      # 宿主机目录挂载（供 UI 浏览和读取有声书文件）
      # 将包含有声书的父目录挂载进容器，这样可以在 UI 中浏览和选择子目录
      # 示例：挂载 /nas 后，可在 UI 中选择 /nas/books、/nas/audiobooks 等任意子目录
      - /nas:/nas

      # 如果有声书分布在多个不同路径，可以添加多个挂载：
      # - /mnt/media:/mnt/media
      # - /home/user/audiobooks:/home/user/audiobooks

      # 持久化服务端数据（配置、元数据、用户数据、封面等）
      - ./data:/app/server/data
    environment:
      - NODE_ENV=production
      - AUDIOBOOK_PATH=/nas/books
      - PORT=4001
      # 阿里云OSS配置（可选）
      # - OSS_REGION=oss-cn-hangzhou
      # - OSS_ACCESS_KEY_ID=your_access_key_id
      # - OSS_ACCESS_KEY_SECRET=your_access_key_secret
      # - OSS_BUCKET=your_bucket_name
      # - OSS_PREFIX=audiobooks/
    restart: unless-stopped
